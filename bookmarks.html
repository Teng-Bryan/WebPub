<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Bookmarks</title>
  <link rel="stylesheet" href="aarushstyle.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    html{
	  min-height: 100vh;
	  overflow-y: scroll;
	}
	
    body {
      display: flex;
      flex-direction: column;
    }
	
    .VListBanner {
      margin-top: auto;
    }
	
	.productName {
			font-size: clamp(10px, 1.25vw, 25px);
			font-weight: bold;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			max-width: 100%;
		}
  </style>
</head>

<body>
    <!-- Top Banner -->
    <div class="header">
		<div class="logo-section">
			<img src="zhengbopictures/KeELogoWhiteTransparent2NoText.png" />
			<h1 class="logo-text">KeElectronics</h1>
		</div>
			
		<div class="button-container" id="authButtons">
				<!-- Buttons will be inserted by JavaScript -->
		</div>
	</div>

    <!-- Navigation -->
    <div class="backgroundnav">
		<div class="navigate">
			<a href="index.html">
				<img src="aarushpictures/Home.png" alt="Home" />
				Home
			</a>
			<a href="Product_Catalogue.html">
				<img src="aarushpictures/Shop.png" alt="Products" />
				Products
			</a>
			<a href="bookmarks.html">
				<img src="aarushpictures/bkmk.png" alt="Products" />
				Bookmarks
			</a>
			<a href="about_us.html">
				<img src="aarushpictures/AboutUs.png" alt="About Us" />
				About Us
			</a>
			<a href="contact_us.html">
				<img src="aarushpictures/ContactUs.png" alt="Contact Us" />
				Contact Us
			</a>
		</div>
	</div>

    <!-- Bookmarks Content -->
    <section class="product-catalogue">
      <h1>My Bookmarked Products</h1>
      <p class="subheading">Here are the products you’ve saved for later!</p>
       <div id="bookmarksList" style="text-align:center;">Loading bookmarks…</div>
    </section>
  
  <!-- Footer -->
  <div class="VListBanner" style="background-color: #87ceeb; padding: 1%; align-items: center; margin-top:auto; flex: 1;">
		<div class="bannerText">End of the line!</div>
		<!---->
		<span style="font-size: clamp(15px, 2vw, 20px)">You've reached the end of the Order Form.</span>
		<div class="HListBanner" style="background-color: #87ceeb; gap: 1vw; padding: 1% 1vw; font-size: clamp(13px, 2vw, 20px);">
			<a class="linkButton" href="index.html" target="" style="padding: 0.5vw 1.5vw; color: black; border: 1px solid #000;">Home Page</a>
			<a class="linkButton" href="about_us.html" target="" style="padding: 0.5vw 1.5vw; color: black; border: 1px solid #000;">About Us</a>
			<a class="linkButton" href="javascript:void(0)" onclick="scrollToTop()" style="padding: 0.5vw 1.5vw; color: black; border: 1px solid #000;">Back To Top</a>
			<!-- Back to Top Java-->
			<script>
			  function scrollToTop() {
				window.scrollTo({ top: 0, behavior: 'smooth' });
			  }
			</script>
		   	</div>
               	<div style="font-size: clamp(15px, 2vw, 20px)">Have any feedback for us? Leave it down here!</div>
		<a class="linkButton" href="Feedback_Form.html" target="" style="padding: 0.5vw 1.5vw; color: black; border: 1px solid #000; font-size: clamp(13px, 2vw, 20px);">
		Feedback</a>

		<br/>
		<span style="font-size: clamp(10px, 2vw, 15px)">© 2025 KeElectronics. All rights reserved.</span>
		</div>


  <script>
  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function logout() {
    localStorage.removeItem("loggedInUser");
    window.location.reload();
  }

  // Auth buttons
  const authButtons = document.getElementById("authButtons");
  const username = localStorage.getItem("loggedInUser");
  if (username) {
    authButtons.innerHTML = `
      <span class="Username">Welcome, <strong>${username}</strong></span>
      <button onclick="logout()" class="signup-btn">Logout</button>
    `;
  } else {
    authButtons.innerHTML = `
      <a href="signin.html?redirect=Feedback_Form.html"><button class="auth-btn">Sign In</button></a>
      <a href="signup.html?redirect=Feedback_Form.html"><button class="signup-btn">Sign Up</button></a>
    `;
  }

  // Master list of products
  const products = [
    { id: 1, name: "ASUS TUF Gaming A14", type: "Laptop", price: 1499, image: "aarushpictures/asusa14.jpg" },
    { id: 2, name: "MacBook Pro M3", type: "Laptop", price: 1999, image: "aarushpictures/mac.png" },
    { id: 3, name: "HP Victus 15", type: "Laptop", price: 1925, image: "aarushpictures/victus.png" },
    { id: 4, name: "Dell XPS 13", type: "Laptop", price: 1299, image: "aarushpictures/xps.png" },
    { id: 5, name: "iPhone 15 Pro", type: "Smartphone", price: 999, image: "aarushpictures/iphone.png" },
    { id: 6, name: "Samsung Galaxy S24", type: "Smartphone", price: 899, image: "aarushpictures/s25.png" },
    { id: 7, name: "iPad Pro", type: "Tablet", price: 1199, image: "aarushpictures/ipadblue.png" },
    { id: 8, name: "Samsung Galaxy Tab S9", type: "Tablet", price: 799, image: "aarushpictures/tabs7gal.png" }
  ];

  function loadBookmarks() {
    const user = localStorage.getItem("loggedInUser");
    const key = `bookmarks_${user}`;
    const list = JSON.parse(localStorage.getItem(key)) || [];

    if (!list.length) {
      document.getElementById("bookmarksList").innerHTML = `<p style="padding: 3vw">No bookmarks found.</p>`;
      return;
    }

    let html = '<table class="product-table"><tr>';
    list.forEach((id, idx) => {
      const p = products.find(x => x.id === id);
      if (!p) return;
      html += `
        <td class="product-card">
          <img src="${p.image}" alt="${p.name}" class="product-img">
          <div class="product-info">
            <span class="productName">${p.name}</span>
            <p class="type">${p.type}</p>
            <p class="price">$${p.price}</p>
            <div class="btn-group">
              <div class="btn-row">
                <button class="btn-modern btn-cart" onclick="buyNow(${p.id})">Buy Now</button>
              </div>
              <div>
                <button class="btn-modern btn-bookmark" onclick="removeBookmark(${p.id})">Remove</button>
              </div>
            </div>
          </div>
        </td>`;
      if ((idx + 1) % 2 === 0 && idx !== list.length - 1) html += '</tr><tr>';
    });
    html += '</tr></table>';

    document.getElementById("bookmarksList").innerHTML = html;
  }

  function removeBookmark(productId) {
    const user = localStorage.getItem("loggedInUser");
    if (!user) {
      showToast('Please sign in to manage bookmarks.', 'error');
      return;
    }

    const key = `bookmarks_${user}`;
    let list = JSON.parse(localStorage.getItem(key)) || [];

    if (!list.includes(productId)) {
      showToast('That item is no longer in your bookmarks.', 'info');
      loadBookmarks();
      return;
    }

    list = list.filter(id => id !== productId);
    localStorage.setItem(key, JSON.stringify(list));

    const prod = products.find(p => p.id === productId);
    loadBookmarks();
    showToast(`${prod ? prod.name : 'Item'} removed from bookmarks.`, 'success');
  }

  function buyNow(productId) {
    const user = localStorage.getItem("loggedInUser");
    if (!user) {
      showToast('Please sign in to make a purchase.', 'error');
      return;
    }
    const product = products.find(p => p.id === productId);
    localStorage.setItem("selectedProduct", JSON.stringify(product));
    window.location.href = "Product_Details.html";
  }

  window.addEventListener('DOMContentLoaded', loadBookmarks);
</script>

<div id="toast-root" class="toast-container" aria-live="polite" aria-atomic="true"></div>

<script>
  function showToast(message, type = 'info') {
    const root = document.getElementById('toast-root');
    if (!root) return;

    const el = document.createElement('div');
    el.className = `toast toast--${type}`;
    el.setAttribute('role', 'status');
    el.textContent = message;

    el.addEventListener('animationend', (e) => {
      if (e.animationName === 'toast-out') el.remove();
    });

    root.appendChild(el);
  }
</script>

</body>
</html>


